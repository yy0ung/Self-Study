# OS 운영체제  교착상태 (1)

<br>

### 1. **교착상태 정의**
* 대기 중인 스레드들이 다시는 그 상태를 변경시킬 수 없으면 교착상태에 빠지게 된다.
* 스레드들이 요청한 자원들이 다른 스레드들에 의해 점유되어 있고, 점유한 스레드들도 다 대기 상태에 있는 경우를 말한다.

<br><br>

### 2. **교착상태 필요조건**
#### *교착상태는 한 시스템에 다음 네 가지 조건이 동시에 성립된 경우 발생할 수 있다.*
* **상호 배제 (mutual exclusion)**
  * 최소한 하나의 자원이 비공유 모드 (한 번에 한 스레드만이 그 자원을 사용할 수 있는 모드) 로 점유되어야 함.
  * 다른 스레드가 그 자원을 요청하면 요청 스레드는 자원이 방출될 때까지 반드시 지연됨.
* **점유하며 대기 (hold-and-wait)**
  * 스레드는 최소한 하나의 자원을 점유한 채, 현재 다른 스레드에 의해 점유된 자원을 추가로 얻기 위해 대기해야 함.
* **비선점 (no preemption)**
  * 자원들을 선점할 수 없어야함.
  * 자원이 강제적으로 방출될 수 없고, 점유하고 있는 스레드가 태스크를 종료한 후 그 스레드에 의해 자발적으로만 방출 가능.
* **순환 대기 (circular wait)**
  * 대기하고 있는 스레드의 집합에서 서로 순환하며 서로 점유한 자원을 대기함.

<br><br>

### 3. **교착상태 처리 방법 - 교착상태 예방**
#### *교착상태가 발생할 수 있는 네 가지 필요조건 중 최소한 하나가 성립하지 않도록 보장하는 것.*
* **상호배제 조건 방지**
  * 한 번에 여러 프로세스가 자원을 공유할 수 있게 함.
  * 현실적으로 불가능. 일부 자원은 근본적으로 공유가 불가능.
* **점유하며 대기 방지**
  * 스레드가 자원을 요청할 때마다 다른 자원을 보유하지 않도록 보장.
  * 실행 시작 전에 모든 자원을 요청하고 허용할 때까지 실행을 보류. 이후에 다시 자원을 요청하고 대기하는 상태를 방지함.
* **비선점 방지**
  * 이미 할당된 자원이 선점되지 않아야 함.
  * 자원을 점유하고 있는 A 프로세스가 즉시 할당이 불가능한 다른 자원을 요청할 경우, A 프로세스가 점유하고 있는 기존의 자원을 모두 반납하고 기다릴 수 있음.
* **순환 대기 방지**
  * 일정한 한 쪽 방향으로만 자원을 요청할 수 있도록 한다. (순환 대기를 방지함) 